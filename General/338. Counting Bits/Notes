An easy recurrence for this problem is f[i] = f[i >> 1] + (i & 1);